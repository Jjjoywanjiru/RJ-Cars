<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RJ Cars - Your Trusted Car Dealer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <div class="header">
        <h1>Welcome to RJ Cars</h1>
        <p>Find Your Dream Car Today</p>
    </div>

    <div class="nav">
        <a href="{{ url_for('homepage') }}">Home</a>
        <a href="{{ url_for('featuredCars') }}">Featured Cars</a>
        <a href="{{ url_for('search') }}">Search vehicles</a>
        <a href="{{ url_for('sellers') }}">Sellers</a>
    </div>

    <div class="search-form">
        <form method="GET" action="{{ url_for('search') }}">
            {{ form.hidden_tag() }}
            <div>
                {{ form.brand.label }}<br>
                {{ form.brand() }}
                {% for error in form.brand.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
    
            <div>
                {{ form.model.label }}<br>
                {{ form.model() }}
                {% for error in form.model.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
    
            <div>
                {{ form.year.label }}<br>
                {{ form.year(placeholder="Enter Year") }}
                {% for error in form.year.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
    
            <div>
                {{ form.price.label }}<br>
                {{ form.price(placeholder="Enter Price") }}
                {% for error in form.price.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
    
            <div>
                {{ form.mileage.label }}<br>
                {{ form.mileage(placeholder="Enter Mileage") }}
                {% for error in form.mileage.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
    
            <div>
                {{ form.condition.label }}<br>
                {{ form.condition() }}
                {% for error in form.condition.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
    
            <div>
                {{ form.location.label }}<br>
                {{ form.location(placeholder="Enter Location") }}
                {% for error in form.location.errors %}
                    <span style="color: red;">[{{ error }}]</span>
                {% endfor %}
            </div>
    
            <div>{{ form.submit() }}</div>
        </form>
    </div>

    <div class="footer">
        <p>&copy; 2025 RJ Cars. All rights reserved.</p>
    </div>

    <script>
        // Add dynamic behavior - when brand is selected, update model options
        $(document).ready(function() {
            $('#brand').change(function() {
                var selectedBrand = $(this).val();
                
                // Make AJAX request to get models for selected brand
                $.ajax({
                    url: '/get_models/' + selectedBrand,
                    type: 'GET',
                    success: function(data) {
                        // Clear current options
                        $('#model').empty();
                        
                        // Add new options
                        $.each(data, function(i, item) {
                            $('#model').append($('<option>', {
                                value: item[0],
                                text: item[1]
                            }));
                        });
                    },
                    error: function(error) {
                        console.log('Error fetching models:', error);
                    }
                });
            });
        });
    </script>
</body>
</html>
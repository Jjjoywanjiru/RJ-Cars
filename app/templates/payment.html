<!DOCTYPE html>
<html>
<head>
    <title>M-Pesa Payment</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='payment.css') }}">
</head>
<body>
    <div class="payment-container">
        <h2>Complete Payment via M-Pesa</h2>
        
        <div class="payment-summary">
            <h3>Order Summary</h3>
            <div class="summary-item">
                <span>Vehicle:</span>
                <span>{{ listing.year }} {{ listing.brand }} {{ listing.model }}</span>
            </div>
            <div class="summary-item">
                <span>Promotion:</span>
                <span>{{ promotion_type|capitalize }} Listing</span>
            </div>
            <div class="summary-item total">
                <span>Total:</span>
                <span>KES {{ amount }}</span>
            </div>
        </div>

        <form method="POST" action="{{ url_for('initiate_payment') }}">
            <input type="hidden" name="listing_id" value="{{ listing.id }}">
            <input type="hidden" name="promotion_type" value="{{ promotion_type }}">
            <input type="hidden" name="amount" value="{{ amount }}">
            
            <div class="form-group">
                <label for="phone_number">M-Pesa Phone Number</label>
                <input type="tel" id="phone_number" name="phone_number" 
                       placeholder="e.g. 254712345678" required>
                <small>Enter your M-Pesa registered number in format 2547XXXXXXXX</small>
            </div>
            
            <button type="submit" class="pay-button">
                Pay via M-Pesa
            </button>
        </form>
    </div>
</body>
</html>